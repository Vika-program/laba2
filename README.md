# Лабораторная работа № 2 "Файловая оболочка с командами"
## Запуск программы
uv run python -m src.main
## Запуск тестов
uv run pytest

## Алгоритм
### Особенности
* Я использую typer. Чтобы команды из разных файлов работали в main.py, я создаю
специальные функции, которые регистрируют команду и вызываю их в main.
* При запуске программы я создаю бесконечный цикл
и выхожу из него только по команде exit.
* Я обрабатываю ошибки в основном через try/except, это позволяет не завершать
программу каждый раз, когда пользователь ошибся. Я использую конструкцию
except Exception as e для этого.

### Алгоритм в main
* Пользователь вводит команду
* Выполняется парсинг, пустые строки просто игнорируются
* Если ввели exit, завершаем программу
* Передаём ввод пользователя typer приложению, оно идентифицирует команду
и выполняет её
* Производим логирование и добавляем команду в историю

### Нюансы
### ls
* Я использую stat для вывода информации о файле.
* Команда работает только с каталогами, если передать файл, будет ошибка
### cd
* Использую os.chdir(path), чтобы перейти в каталог
* Преобразование путей вынесено в функцию convert_path
### cp
* Поддержка обычного копирования
* Команда поддерживает множественное копирование файлов, каталогов в каталог
* Поддержка рекурсивного копирования
* Если флаг -r написан тогда, когда он не нужен, просто игнорируем его
### mv
* Может перемещать несколько объектов
### rm
* Защита от удаления корневой и родительской директории
* Подтверждение при удалении каталога
* Каталог можно удалить только рекурсивным способом
* Поддержка множественного удаления
### log
* Записываю в файл ошибку или просто команду в зависимости
от того, что вернула функция (None или ошибку)
### zip, unzip, tar, untar
* Использовались библиотеки tarfile, zipfile
* В функциях zip и tar по умолчанию стоит название архива folder
* Функция zip может создать архив только из каталога,
а tar поддерживает и файлы, и каталоги
* Если попытаться распаковать несуществующий архив, выпадет ошибка
### grep
* Поддерживаются флаги -r, -i (их надо писать по очереди)
* У меня поиск совпадений с шаблоном в файле и в каталоге вынесен в 2 разных файла
* Можно искать файлы в каталоге по расширению (например *.txt), для реализации
этого я использовала fnmatch
### history
* По умолчанию выводит 5 последних строк из файла .history
* Если запросить больше строк, чем есть, просто выведет все, ошибки не будет
